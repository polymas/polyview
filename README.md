# Polymarket äº¤æ˜“åˆ†æå·¥å…·

ä¸€ä¸ªåŸºäº Next.js å’Œ TypeScript çš„ Polymarket äº¤æ˜“è®°å½•åˆ†æå’Œå¯è§†åŒ–å·¥å…·ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“Š **äº¤æ˜“è®°å½•è·å–**: æ ¹æ®é’±åŒ…åœ°å€è·å– Polymarket å†å²äº¤æ˜“è®°å½•
- ğŸ’° **ç›ˆäºåˆ†æ**: è‡ªåŠ¨è®¡ç®—æ¯ä¸ªå‘½é¢˜çš„ç›ˆäºæƒ…å†µ
- ğŸ“… **ç›ˆäºæ—¥å†**: å¯è§†åŒ–å±•ç¤ºæ¯æ—¥ç›ˆäºæƒ…å†µ
- ğŸ“ˆ **ç»Ÿè®¡æ•°æ®**: åŒ…æ‹¬æ€»æŠ•å…¥ã€æ€»ç›ˆäºã€æ”¶ç›Šç‡ç­‰
- ğŸ¯ **æœˆåŒ–æ”¶ç›Šç‡**: è‡ªåŠ¨è®¡ç®—æœˆåŒ–æ”¶ç›Šç‡ï¼ˆåŸºäºæœ€å¤§å ç”¨èµ„é‡‘ï¼‰

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**: Next.js 16 (App Router)
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: Tailwind CSS
- **æ•°æ®å¯è§†åŒ–**: Recharts
- **æ—¥æœŸå¤„ç†**: date-fns
- **HTTP å®¢æˆ·ç«¯**: Axios
- **æ•°æ®åº“**: SQLite (better-sqlite3)

## å®‰è£…å’Œè¿è¡Œ

### å‰ç½®è¦æ±‚

- Node.js 18+
- npm æˆ– yarn

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

```bash
npm run dev
```

å¯åŠ¨åè®¿é—®ï¼šhttp://localhost:3000

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```

### å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

```bash
npm start
```

## éƒ¨ç½²åˆ° Vercel

### æ–¹å¼ 1: é€šè¿‡ Vercel CLI

1. å®‰è£… Vercel CLIï¼š
```bash
npm i -g vercel
```

2. éƒ¨ç½²ï¼š
```bash
vercel
```

### æ–¹å¼ 2: é€šè¿‡ GitHub

1. å°†ä»£ç æ¨é€åˆ° GitHub
2. åœ¨ [Vercel](https://vercel.com) ä¸­å¯¼å…¥é¡¹ç›®
3. Vercel ä¼šè‡ªåŠ¨æ£€æµ‹ Next.js å¹¶éƒ¨ç½²

### ç¯å¢ƒå˜é‡

å¦‚æœéœ€è¦è‡ªå®šä¹‰é…ç½®ï¼Œå¯ä»¥åœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

- `DB_FILE`: æ•°æ®åº“æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ï¼š`/tmp/polymarket_cache.db`ï¼ŒVercel ä½¿ç”¨ä¸´æ—¶å­˜å‚¨ï¼‰

**æ³¨æ„**: Vercel çš„ `/tmp` ç›®å½•æ˜¯ä¸´æ—¶å­˜å‚¨ï¼Œé‡å¯åä¼šä¸¢å¤±ã€‚å¦‚éœ€æŒä¹…åŒ–ï¼Œå»ºè®®ä½¿ç”¨ï¼š
- Vercel KV (Redis)
- Vercel Postgres
- æˆ–å…¶ä»–å¤–éƒ¨æ•°æ®åº“æœåŠ¡

## ä½¿ç”¨è¯´æ˜

1. åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä½ çš„ Polymarket é’±åŒ…åœ°å€ï¼ˆ0x å¼€å¤´çš„åœ°å€ï¼‰
2. ç‚¹å‡»"æŸ¥è¯¢"æŒ‰é’®è·å–äº¤æ˜“è®°å½•
3. æŸ¥çœ‹ç»Ÿè®¡æ•°æ®ã€ç›ˆäºæ—¥å†å’Œè¯¦ç»†çš„ç›ˆäºè¡¨æ ¼
4. å¯ä»¥åˆ‡æ¢æŸ¥çœ‹è¿‘7å¤©æˆ–è¿‘30å¤©çš„ç»Ÿè®¡æ•°æ®

## API ç«¯ç‚¹

é¡¹ç›®æä¾›ä»¥ä¸‹ API ç«¯ç‚¹ï¼š

- `GET /api/activity` - è·å–ç”¨æˆ·æ´»åŠ¨è®°å½•
  - å‚æ•°: `user` (å¿…éœ€), `limit`, `offset`, `sort_by`, `sort_direction`, `use_cache`
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `GET /api/cache/stats` - æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡
- `DELETE /api/cache/clear` - æ¸…é™¤ç”¨æˆ·ç¼“å­˜

## é¡¹ç›®ç»“æ„

```
polyview/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/              # API Routes
â”‚   â”‚   â”œâ”€â”€ activity/     # æ´»åŠ¨æ•°æ® API
â”‚   â”‚   â”œâ”€â”€ cache/        # ç¼“å­˜ç®¡ç† API
â”‚   â”‚   â””â”€â”€ health/       # å¥åº·æ£€æŸ¥ API
â”‚   â”œâ”€â”€ components/       # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PnLTable.tsx           # ç›ˆäºè¡¨æ ¼ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ PnLCalendar.tsx        # ç›ˆäºæ—¥å†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ TradingVolumeCalendar.tsx  # äº¤æ˜“é¢æ—¥å†ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Statistics.tsx        # ç»Ÿè®¡ä¿¡æ¯ç»„ä»¶
â”‚   â”‚   â””â”€â”€ HoldingDurationChart.tsx   # æŒä»“æ—¶é•¿åˆ†å¸ƒå›¾è¡¨
â”‚   â”œâ”€â”€ services/         # æœåŠ¡å±‚
â”‚   â”‚   â””â”€â”€ polymarketApi.ts      # Polymarket API é›†æˆ
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ pnlCalculator.ts      # ç›ˆäºè®¡ç®—é€»è¾‘
â”‚   â”œâ”€â”€ types.ts          # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ page.tsx          # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ layout.tsx        # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ globals.css       # å…¨å±€æ ·å¼
â”œâ”€â”€ lib/                  # åç«¯åº“
â”‚   â”œâ”€â”€ cache.ts          # SQLite ç¼“å­˜ç®¡ç†
â”‚   â””â”€â”€ polymarketApi.ts  # Polymarket API è°ƒç”¨é€»è¾‘
â”œâ”€â”€ next.config.mjs       # Next.js é…ç½®
â”œâ”€â”€ vercel.json           # Vercel éƒ¨ç½²é…ç½®
â””â”€â”€ package.json
```

## å·¥ä½œåŸç†

1. **æ•°æ®è·å–**: å‰ç«¯è°ƒç”¨ `/api/activity` è·å–ç”¨æˆ·äº¤æ˜“è®°å½•
2. **ç¼“å­˜æœºåˆ¶**: ä½¿ç”¨ SQLite æ•°æ®åº“ç¼“å­˜ API å“åº”ï¼Œå‡å°‘å¯¹ Polymarket API çš„è¯·æ±‚
3. **æ•°æ®è®¡ç®—**: å‰ç«¯ä½¿ç”¨ `pnlCalculator` è®¡ç®—ç›ˆäºã€ç»Ÿè®¡æ•°æ®ç­‰
4. **æ•°æ®å±•ç¤º**: ä½¿ç”¨ React ç»„ä»¶å’Œ Recharts å¯è§†åŒ–å±•ç¤ºæ•°æ®

## æ³¨æ„äº‹é¡¹

- **çœŸå®æ•°æ®**: æœ¬åº”ç”¨ç›´æ¥è°ƒç”¨ Polymarket çš„çœŸå® API è·å–äº¤æ˜“æ•°æ®
- **æ•°æ®é™åˆ¶**: 
  - API æŸ¥è¯¢é™åˆ¶ä¸ºæœ€å¤š 1000 æ¡è®°å½•
  - å¦‚æœé’±åŒ…åœ°å€æ²¡æœ‰äº¤æ˜“è®°å½•ï¼Œä¼šæ˜¾ç¤ºç›¸åº”æç¤º
- **ç½‘ç»œè¦æ±‚**: éœ€è¦èƒ½å¤Ÿè®¿é—® Polymarket çš„ API ç«¯ç‚¹
- **ç¼“å­˜**: æ•°æ®ä¼šç¼“å­˜åœ¨æœ¬åœ° SQLite æ•°æ®åº“ä¸­ï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦

## å¼€å‘

é¡¹ç›®ä½¿ç”¨ Next.js App Routerï¼Œæ”¯æŒï¼š
- æœåŠ¡ç«¯æ¸²æŸ“ (SSR)
- API Routes
- çƒ­æ¨¡å—æ›¿æ¢ (HMR)
- TypeScript ç±»å‹æ£€æŸ¥

## License

MIT
